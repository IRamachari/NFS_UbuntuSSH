name: SSHserver
on: 
  workflow_dispatch:
defaults:
  run:
    shell: bash
jobs:
  build:
    runs-on: ubuntu-latest
    steps: 
    - uses: fastai/workflows/ssh@master
      with:
        ssh_key: ${{ secrets.SSH_KEY }}
        key_file: id_ecdsa
    - uses: actions/checkout@v2
    - name: Update Linux Fondation..
      run: |
        export ALLOW_MISSING_DEPENDENCIES=true
        export TZ=Asia/Jakarta
        sudo apt-get -y update && sudo apt-get -y upgrade
        sudo apt-get -y install git cmake clang-format clang-tidy clang-tools clang clangd libc++-dev libc++1 libc++abi-dev libc++abi1 libclang-dev libclang1 liblldb-dev libllvm-ocaml-dev libomp-dev libomp5 lld lldb llvm-dev llvm-runtime llvm python python-clang build-essential make bzip2 libncurses5-dev lld libssl-dev ninja-build liblz4-tool bc curl unzip lzop ccache flex strace bison gcc-aarch64-linux-gnu gcc-arm-linux-gnueabi openssh-server screen python git openjdk-8-jdk android-tools-adb bc bison build-essential curl flex g++-multilib gcc-multilib gnupg gperf imagemagick lib32ncurses-dev lib32readline-dev lib32z1-dev  liblz4-tool libncurses5-dev libsdl1.2-dev libssl-dev libxml2 libxml2-utils lzop pngcrush rsync schedtool squashfs-tools xsltproc yasm zip zlib1g-dev libtinfo5 libncurses5 neofetch 
        wget https://storage.googleapis.com/git-repo-downloads/repo -P /usr/local/sbin/
        sudo chmod +x /usr/local/sbin/repo
        sudo apt-get update --fix-missing
      env:
        GH_TOKEN: ${{ secrets.GH_TOKEN }}
    - name: Session Setup
      uses: mxschmitt/action-tmate@master
